<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BEAR.Sunday | My First Hypermedia</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/github.css">
    <link rel="stylesheet" href="/css/main.css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/carousel.css">
    <link rel="icon" sizes="16x16 32x32 48x48 64x64" href="/images/icon/favicon.ico">

    <!--[if IE]><link rel="shortcut icon" href="/images/icon/favicon.ico"><![endif]-->

    <!-- The below are optional but encouraged -->

    <!-- Touch icon for iOS 2.0+ and Android 2.1+: -->
    <link rel="apple-touch-icon-precomposed" href="/images/icon/favicon-152.png">

    <!-- The below are optional -->

    <!-- IE 10 Metro tile icon (Metro equivalent of apple-touch-icon): -->
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="/images/icon/favicon-144.png">
    <!-- For iPad with high-resolution Retina display running iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/images/icon/favicon-152.png">
    <!-- For iPad with high-resolution Retina display running iOS ≤ 6: -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/icon/favicon-144.png">
    <!-- For iPhone with high-resolution Retina display running iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/images/icon/favicon-120.png">
    <!-- For iPhone with high-resolution Retina display running iOS ≤ 6: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/icon/favicon-114.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/icon/favicon-72.png">
    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" href="/images/icon/favicon-57.png">
</head>
<body>
<!--<div id="wrap">-->

    <!-- Docs master nav -->
    <div class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="/index.html" class="navbar-brand">
                    <span class="bear-icon-32"></span>
                </a>
            </div>
            <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
                <ul class="nav navbar-nav">
                    <li >
                        <a href="/manual/en/index.html">Manual</a>
                    </li>
                    <li >
                        <a href="/manual/en/tutorial.html">Tutorial</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

<div class="container">

    <div class="row">
        <div class="col-md-3">
            <div class="panel panel-default">
    <div class="panel-heading"><strong>My First - Tutorial</strong></div>
    <div class="panel-body">

        <ul class="nav nav-pills nav-stacked">
            

            

            

            

            
                <li><a href="my_first_resource.html">My First Resource Object</a></li>
<li><a href="my_first_web_api.html">My First Web API</a></li>
<li><a href="my_first_test.html">My First Test</a></li>
<li><a href="my_first_web_page.html">My First Web Page</a></li>
<li><a href="my_first_resource_request.html">My First Resource Request</a></li>
<li><a href="my_first_di.html">My First Injection</a></li>
<li><a href="my_first_aop.html">My First Aspect</a></li>
<li><a href="my_first_pull.html">My First Pull</a></li>
<li><a href="my_first_hypermedia.html">My First Hyper Media</a></li>
            

            

            

            

            

            

        </ul>
    </div>
</div>
        </div>
        <div class="col-md-9">
            <h1 id="toc_0">My First Hypermedia</h1>

<h2 id="toc_1">What is Hypermedia?</h2>

<p>In 1962 Ted Nelson proposed <a href="http://en.wikipedia.org/wiki/Hypertext"><strong>Hypertext</strong></a>.
This is when in order to refer some text other text referral links are embedded in the text itself, the referrals that joins the text are called Hyperlinks.</p>

<p>The most famous and successful implementation of Hypertext is the Worldwide Web.</p>

<p>(The href in a property of the <code>&lt;a&gt;</code> tag is an abbreviation for hyper-reference).
Also to note is that PHP is an acronym of <em>PHP: Hypertext Preprocessor</em> <a href="http://www.php.net/manual/en/faq.general.php#faq.general.acronym">PHP an acronym for what?</a>)</p>

<h2 id="toc_2">Non Existent Hypermedia</h2>

<p>Let&#39;s think in terms of a <code>REST API</code> for example when you order a coffee at a coffee shop.</p>

<p>When you order a coffee, the <code>REST API</code> is provided with the following.</p>

<table><thead>
<tr>
<th>type</th>
<th>value</th>
</tr>
</thead><tbody>
<tr>
<td>METHOD</td>
<td>POST</td>
</tr>
<tr>
<td>URI</td>
<td><a href="http://restbucks.com/order/%7B?drink%7D">http://restbucks.com/order/{?drink}</a></td>
</tr>
<tr>
<td>Query</td>
<td>drink=Drink Name</td>
</tr>
</tbody></table>

<p>You use this <code>API</code> when ordering a drink. When using this API you create a (POST) <code>Order Resource</code>.</p>
<div class="highlight"><pre><code class="php"><span class="x">post http://restbucks.com/order/?drink=latte</span>
</code></pre></div>
<p>The order resource has been created and the order contents are returned.</p>
<div class="highlight"><pre><code class="php"><span class="x">{</span>
<span class="x">    &quot;drink&quot;: &quot;latte&quot;,</span>
<span class="x">    &quot;cost&quot;: 2.5,</span>
<span class="x">    &quot;id&quot;: &quot;5052&quot;,</span>
<span class="x">}</span>
</code></pre></div>
<p>This is <em>not hypermedia</em>. The data does not have any attached uniquely displayed URI&#39;s or related links.</p>

<h2 id="toc_3">HAL - Hypertext Application Language</h2>

<p>JSON is not essentially a hypermedia format, however using JSON the 
[<a href="http://stateless.co/hal_specification.html">http://stateless.co/hal_specification.html</a> HAL - Hypertext Application Language]
which is a [<a href="http://tools.ietf.org/html/draft-kelly-json-hal-00">http://tools.ietf.org/html/draft-kelly-json-hal-00</a> RFC Draft Standard] 
is used to provide <code>JSON+HAL</code> hyper-media.</p>

<p>In BEAR.Sunday when you set your resource rendering to <code>HalRenderer</code> you can output in HAL format.</p>
<div class="highlight"><pre><code class="php"><span class="x">{</span>
<span class="x">    &quot;drink&quot;: &quot;latte&quot;,</span>
<span class="x">    &quot;cost&quot;: 2.5,</span>
<span class="x">    &quot;id&quot;: &quot;1545&quot;,</span>
<span class="x">    &quot;_links&quot;: {</span>
<span class="x">        &quot;self&quot;: {</span>
<span class="x">            &quot;href&quot;: &quot;app://self/restbucks/order?id=1545&quot;</span>
<span class="x">        },</span>
<span class="x">        &quot;payment&quot;: {</span>
<span class="x">            &quot;href&quot;: &quot;app://self/restbucks/payment?id=1545&quot;</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<p>This is an order resource output in the <code>HAL</code> Format.
The URI&#39;s and related link information for itself are embedded in the <code>_links</code> property.
The order and payment relationship is not saved by the client, but by the service.</p>

<p>On the service side you can change the link references according to service circumstances.
In those times you need to change nothing on the client, just carry on following the provided link.
By having links you transform your service from just another data format to a self descriptive Hyper-Media resource.</p>

<h2 id="toc_4">Adding Hyperlinks</h2>

<p>You declare your resource object&#39;s <code>links</code> property like this. </p>
<div class="highlight"><pre><code class="php"><span class="x">    public $links = [</span>
<span class="x">        &#39;news&#39; # &gt; [Link::HREF &gt; &#39;page://self/news/today&#39;]</span>
<span class="x">    ];</span>
</code></pre></div>
<h2 id="toc_5">Using a URI Template for your Query</h2>

<p>When the URI to dynamically decided you can for example you can create a query in the onPost method like this.</p>
<div class="highlight"><pre><code class="php"><span class="x">$this-&gt;links[&#39;friend&#39;] # [Link::HREF =&gt; &quot;app://self/sns/friend?id{$id}&quot;];</span>
</code></pre></div>
<p>In the <code>links</code> property you can set the URI template like this.</p>
<div class="highlight"><pre><code class="php"><span class="x">    public $links =&gt; [</span>
<span class="x">        &#39;friend&#39; # &gt; [Link::HREF =&gt; &#39;app://self/sns/friend{?id}&#39;, Link::TEMPLATED &gt; true]</span>
<span class="x">    ];</span>
</code></pre></div>
<p>Here the necessary variable <code>{id}</code> is retrieved from the resource <code>body</code>.</p>

<h2 id="toc_6">Lets Try</h2>

<p>Here is the class that assigns <code>$item</code> and creates the order resource.</p>
<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Sandbox\Resource\App\First\HyperMedia</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">BEAR\Resource\AbstractObject</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">BEAR\Resource\Link</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * Greeting resource</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Order</span> <span class="k">extends</span> <span class="nx">AbstractObject</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">onPost</span><span class="p">(</span><span class="nv">$item</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$item</span><span class="p">;</span>
        <span class="nv">$this</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s1">&#39;is&#39;</span><span class="p">);</span> <span class="c1">// min+sec</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>In order to add hyperlinks setup the <code>links</code> property.</p>
<div class="highlight"><pre><code class="php"><span class="x">    public $links = [</span>
<span class="x">        &#39;payment&#39; # &gt; [Link::HREF =&gt; &#39;app:/self/first/hypermedia/payment{?id}&#39;, Link::TEMPLATED &gt; true]</span>
<span class="x">    ];</span>
</code></pre></div>
<h2 id="toc_7">Make API Request From the Console</h2>
<div class="highlight"><pre><code class="php"><span class="x">$ api get app://self/first/hypermedia/user?id=1</span>
</code></pre></div><div class="highlight"><pre><code class="php"><span class="x">200 OK</span>
<span class="x">content-type: application/hal+json; charset=UTF-8</span>
<span class="x">[BODY]</span>
<span class="x">{</span>
<span class="x">    &quot;item&quot;: &quot;book&quot;,</span>
<span class="x">    &quot;id&quot;: &quot;1442&quot;,</span>
<span class="x">    &quot;_links&quot;: {</span>
<span class="x">        &quot;self&quot;: {</span>
<span class="x">            &quot;href&quot;: &quot;app://self/first/hypermedia/order?item=book&quot;</span>
<span class="x">        },</span>
<span class="x">        &quot;payment&quot;: {</span>
<span class="x">            &quot;href&quot;: &quot;app:/self/first/hypermedia/payment{?id}&quot;,</span>
<span class="x">            &quot;templated&quot;: true</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
<p>The <code>payment</code> link now appears.</p>

<h2 id="toc_8">Using Links in a Program</h2>

<p>In order to use links in your code, inject the <code>A</code> object using the trait <code>AInject</code> and use the <code>href</code> method to retrieve links.
The resource body can retrieve the link composed by the URI template.</p>
<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Sandbox\Resource\App\First\HyperMedia</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">BEAR\Resource\AbstractObject</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">BEAR\Sunday\Inject\ResourceInject</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">BEAR\Sunday\Inject\AInject</span><span class="p">;</span>
<span class="sd">/**</span>
<span class="sd"> * Greeting resource</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Shop</span> <span class="k">extends</span> <span class="nx">AbstractObject</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">ResourceInject</span><span class="p">;</span>
    <span class="k">use</span> <span class="nx">AInject</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">onPost</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$card_no</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$order</span> <span class="o">=</span> <span class="nv">$this</span>
        <span class="o">-&gt;</span><span class="na">resource</span>
        <span class="o">-&gt;</span><span class="na">post</span>
        <span class="o">-&gt;</span><span class="na">uri</span><span class="p">(</span><span class="s1">&#39;app://self/first/hypermedia/order&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">withQuery</span><span class="p">([</span><span class="s1">&#39;item&#39;</span> <span class="o">=&gt;</span> <span class="nv">$item</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">eager</span>
        <span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

        <span class="nv">$payment</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">a</span><span class="o">-&gt;</span><span class="na">href</span><span class="p">(</span><span class="s1">&#39;payment&#39;</span><span class="p">,</span> <span class="nv">$order</span><span class="p">);</span>

        <span class="nv">$this</span>
        <span class="o">-&gt;</span><span class="na">resource</span>
        <span class="o">-&gt;</span><span class="na">put</span>
        <span class="o">-&gt;</span><span class="na">uri</span><span class="p">(</span><span class="nv">$payment</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">withQuery</span><span class="p">([</span><span class="s1">&#39;card_no&#39;</span> <span class="o">=&gt;</span> <span class="nv">$card_no</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">request</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">code</span> <span class="o">=</span> <span class="mi">204</span><span class="p">;</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Just like on a web page and you just click a link to go on to the next page, you are now able to control the next links in the service layer.
Even when the links change there is no need for any change in the client.</p>

        </div>
    </div>

</div>

</div>
</div>
<div id="footer">
    <div class="container">
        <p class="text-muted credit">
            © 2013 <a href="https://github.com/koriym/BEAR.Sunday">BEAR.Sunday</a>
        </p>
    </div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- GoogleAnalytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-6074569-8', 'bearsunday.github.io');
    ga('send', 'pageview');

</script>
</body>
</html>